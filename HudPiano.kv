#:kivy 2.0
#:import Factory kivy.factory.Factory

<Custpopup@Popup>:
    size_hint: .7, .6
    auto_dismiss: False
    title: 'Play me a song'
    
    BoxLayout:
        spacing: 10
        Button:
            id: play
            text: 'Play'
            on_press:
                # what to do here?
        Button:
            id: close
            text: 'Close popup'
            on_press:
                root.dismiss()
                print('closed')

<ScreenMaster>:
    name: 'screenmaster'
    ScreenSelectionMenu
    JukeBoxMode
    TrainingMode
    RecordingMode
        
<ScreenSelectionMenu>:
    name: 'select'
    
    FloatLayout:
        name: 'flayout'
        id: layout
        
        BoxLayout:
            
            pos: (0.05*layout.width, 0.5*layout.height - self.height/2)
            size_hint: (.9, .3)
            spacing: 30
            padding: 30
            
            Button:
                id: jukeboxB
                text: 'Jukebox Mode'
                background_normal: ''
                background_down_normal: ''
                background_color: 0.4,0.1,0.6,1
                background_color_down: 0.7,0.7,0.7,0.7
                
                on_press: print('Jukebox button pressed')
                on_release:
                    app.root.current = 'juke'

            Button:
                id: trainB
                text: 'Traning Mode'
                background_normal: ''
                background_down_normal: ''
                background_color: 0.4,0.1,0.6,1
                background_color_down: 0.7,0.7,0.7,0.7
                
                on_press: print('Training button pressed')
                on_release:
                    app.root.current = 'train'

            Button:
                id: recordB
                text: 'Recording Mode'
                background_normal: ''
                background_down_normal: ''
                background_color: 0.4,0.1,0.6,1
                background_color_down: 0.7,0.7,0.7,0.7
                
                on_press: print('Record button pressed')
                on_release:
                    app.root.current = 'record'

<JukeBoxMode>:
    name: 'juke'
    id: jukebox
    
    FloatLayout:
        id: flayout
        
        Button:
            id: back
            text: 'Return'
            size_hint: None, None
            size: 150, 44
            pos: 0, flayout.height - self.height
            on_press: print('Pressed RETURN button')
            on_release:
                app.root.current = 'select'
                print(app.root.current)

        Spinner:
            id: spin
            size_hint: None, None
            size: 400, 44
            pos: (flayout.center_x - self.width/2, flayout.height - self.height)
            text: 'Music'
            values: root.musicList
            on_text: lambda: root.pageUpdate()
            
        Button:
            id: startB
            text: 'Play song'
            pos: flayout
            

<TrainingMode>:
    name: 'train'
    id: training
    
    FloatLayout:
        id: layout
        
        Button:
            id: back
            text: 'Return'
            size_hint: None, None
            size: 150, 44
            pos: 0, layout.height - self.height
            on_press: print('Pressed RETURN button')
            on_release: app.root.current = 'select'

<RecordingMode>:
    name: 'record'
    id: recording
    
    FloatLayout:
        id: layout
        
        Button:
            id: back
            text: 'Return'
            size_hint: None, None
            size: 150, 44
            pos: 0, layout.height - self.height
            on_press: print('Pressed RETURN button')
            on_release: app.root.current = 'select'